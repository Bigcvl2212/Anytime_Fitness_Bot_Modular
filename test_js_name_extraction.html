<!DOCTYPE html>
<html>
<head>
    <title>Name Extraction Test</title>
</head>
<body>
    <h1>Name Extraction Test</h1>
    <div id="results"></div>

    <script>
        function extractMemberNameFromContent(content) {
            if (!content) return null;
            
            // Handle cases like "Susy MoncadaConfirmarAug 29" - extract just the name part
            const nameMatch = content.match(/^([A-Z][a-z]+ [A-Z][a-z]+)/);
            if (nameMatch) {
                const name = nameMatch[1];
                // Skip if it's a system word
                if (!/^(System|ClubOS|Confirm|Cancel|Reminder|Notification|Ok|Thanks|Yes|No)/i.test(name)) {
                    return name;
                }
            }
            
            // Fallback: try to find names at the beginning of the content
            const lines = content.split('\n');
            for (const line of lines) {
                const trimmed = line.trim();
                if (trimmed && trimmed.length > 3 && trimmed.length < 50) {
                    const nameMatch = trimmed.match(/^([A-Z][a-z]+ [A-Z][a-z]+)/);
                    if (nameMatch) {
                        const name = nameMatch[1];
                        if (!/^(System|ClubOS|Confirm|Cancel|Reminder|Notification|Ok|Thanks|Yes|No)/i.test(name)) {
                            return name;
                        }
                    }
                }
            }
            
            // Try to find any name pattern in the content
            const namePattern = /([A-Z][a-z]+ [A-Z][a-z]+)/g;
            const matches = content.match(namePattern);
            if (matches && matches.length > 0) {
                for (const match of matches) {
                    if (!/^(System|ClubOS|Confirm|Cancel|Reminder|Notification|Ok|Thanks|Yes|No)/i.test(match)) {
                        return match;
                    }
                }
            }
            
            return null;
        }

        // Test cases
        const testCases = [
            "Susy MoncadaConfirmarAug 29",
            "Alejandra EspinozaOk thanksAug 29",
            "Alejandra EspinozaüòûAug 29",
            "Alejandra EspinozaI think we'll work on it next week. I'm too tired. I had a very stressful shift. I prefer to rest and eat something. I haven't eaten yet.Aug 29",
            "Alejandra EspinozaSorry, I'm waking up after a long time at work.Aug 29"
        ];

        const resultsDiv = document.getElementById('results');
        let html = '<h2>Test Results:</h2>';

        testCases.forEach((testCase, index) => {
            const extractedName = extractMemberNameFromContent(testCase);
            html += `
                <div style="margin: 10px 0; padding: 10px; border: 1px solid #ccc;">
                    <strong>Test ${index + 1}:</strong><br>
                    <strong>Input:</strong> ${testCase}<br>
                    <strong>Extracted Name:</strong> ${extractedName || 'null'}<br>
                    <strong>Success:</strong> ${extractedName ? '‚úÖ' : '‚ùå'}
                </div>
            `;
        });

        resultsDiv.innerHTML = html;
    </script>
</body>
</html>
