#!/usr/bin/env python3
"""
Simple test messaging to Jeremy Mayo staff account
Avoiding complex imports that cause issues
"""
import sys
import os

# Add src to path
sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'src'))

# Direct import to avoid complex module init issues
sys.path.append('src/services')
from clubos_messaging_client import ClubOSMessagingClient

# Import secrets
sys.path.append('src/config')
from secrets_local import get_secret

def test_message_to_staff():
    """Test sending a message to Jeremy Mayo's staff account"""
    print("ğŸ§ª Testing message send to Jeremy Mayo staff account...")
    
    try:
        # Get credentials
        username = get_secret('clubos-username')
        password = get_secret('clubos-password')
        
        if not username or not password:
            print("âŒ ERROR: ClubOS credentials not found")
            return
            
        print(f"âœ… Got credentials for user: {username}")
        
        # Initialize client
        client = ClubOSMessagingClient(username, password)
        print("âœ… Client initialized")
        
        # Send SMS message to your own staff account using your ID: 187032782
        print("ğŸ“± Sending SMS message to Jeremy Mayo (187032782)...")
        result = client.send_sms_message(
            member_id="187032782",  # Your staff ID
            message="Test message routing fix - this should come to YOUR phone!",
            notes="Testing bot message routing to staff account"
        )
        
        print(f"ğŸ“± SMS Result: {result}")
        
        if result:
            print("âœ… SUCCESS: SMS sent to Jeremy Mayo staff account")
            print("ğŸ“± Check your phone for the test message!")
        else:
            print("âŒ FAILED: SMS not sent")
            
    except Exception as e:
        print(f"âŒ ERROR: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    test_message_to_staff()
