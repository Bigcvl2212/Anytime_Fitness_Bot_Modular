#!/usr/bin/env python3
"""
Test messaging to Jeremy Mayo staff account
This should send a message directly to your phone/email
"""
import sys
import os
sys.path.append('src')

from services.clubos_messaging_client import ClubOSMessagingClient

def test_message_to_staff():
    """Test sending a message to Jeremy Mayo's staff account"""
    # Load real credentials from config
    sys.path.append('src')
    from config.secrets_local import get_secret
    
    username = get_secret('clubos-username')
    password = get_secret('clubos-password')
    
    print("ğŸ§ª Testing message send to Jeremy Mayo staff account...")
    
    try:
        client = ClubOSMessagingClient(username, password)
        print("âœ… Client initialized")
        
        # Send message to your own staff account using your ID: 187032782
        result = client.send_sms_message(
            member_id="187032782",  # Your staff ID
            message="Test message routing fix - this should come to YOUR phone",
            notes="Testing bot message routing to staff account"
        )
        
        print(f"ğŸ“± SMS Result: {result}")
        
        if result:
            print("âœ… SUCCESS: Message sent to Jeremy Mayo staff account")
            print("ğŸ“± Check your phone for the test message!")
        else:
            print("âŒ FAILED: Message not sent")
            
    except Exception as e:
        print(f"âŒ ERROR: {e}")
        print("ğŸ’¡ Make sure to add your real ClubOS credentials to this test script")

if __name__ == "__main__":
    test_message_to_staff()
